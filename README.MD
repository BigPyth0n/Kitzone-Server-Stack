# 🚀 KITZONE Server Setup v4.1

**🔧 Script: `kitzone-setup.sh` — نصب و راه‌اندازی کامل PostgreSQL، Metabase، Code-Server با دسترسی کامل به کل سرور، pgAdmin، File Browser، Netdata و Nginx Proxy Manager تنها با یک دستور!**

---

## 📌 معرفی و هدف

`kitzone-setup.sh` یک اسکریپت Bash پیشرفته و خودکار است که محیط کامل توسعه، تحلیل، و مانیتورینگ را در کمتر از ۱۰ دقیقه روی سرور Ubuntu شما فراهم می‌کند. این اسکریپت برای تیم‌های داده، برنامه‌نویسان حرفه‌ای، تحلیل‌گران بازارهای مالی، و مدیران DevOps طراحی شده است.

---

## 📊 جدول سرویس‌ها

| سرویس                 | توضیح                                              | پورت دسترسی     |
|----------------------|-----------------------------------------------------|------------------|
| **PostgreSQL**       | پایگاه‌داده سریع SQL برای ذخیره و تحلیل دیتا       | `5432`           |
| **Metabase**         | ابزار داشبورد تحلیلی ساده و سریع                    | `3000`           |
| **pgAdmin**          | پنل تحت وب مدیریت پایگاه‌داده PostgreSQL            | `5050`           |
| **Code-Server**      | محیط توسعه VS Code در مرورگر با دسترسی کامل به `/` | `8443`           |
| **File Browser**     | فایل منیجر گرافیکی با دسترسی کامل به `/`           | `8080`           |
| **Netdata**          | مانیتورینگ کامل منابع سیستم و عملکرد سرور          | `19999` (Host)   |
| **Nginx Proxy Manager** | مدیریت دامنه‌ها و گواهی SSL                        | `80`, `81`, `443` |

---

## 🧰 پیش‌نیازها

- Ubuntu 20.04 یا 22.04 (تست‌شده)
- دسترسی root یا sudo
- اینترنت فعال و پورت‌های باز:  
  `80`, `443`, `5432`, `8443`, `3000`, `5050`, `8080`, `81`, `19999`
- نصب بودن `curl` و `bash`

---

## 🧪 نصب سریع (دستور پیشنهادی)

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/BigPyth0n/Kitzone-Server-Stack/main/main.sh)
```

در طول نصب، اسکریپت اطلاعاتی مانند رمزها و یوزرنیم‌ها را از شما دریافت کرده و به‌صورت امن در فایل زیر ذخیره می‌کند:

```
/root/kitzone-credentials.txt
```

---

## 🗂️ مسیرهای مهم

| فایل یا مسیر                     | توضیح                         |
|----------------------------------|--------------------------------|
| `/root/kitzone-credentials.txt` | حاوی تمام اطلاعات دسترسی      |
| `/opt/postgres/data`            | دیتای PostgreSQL              |
| `/opt/npm/letsencrypt`          | گواهی‌های SSL NPM             |
| دایرکتوری `/`                   | توسط Code-Server و FileBrowser قابل‌دسترسی است |

---

## 🔐 پیکربندی SSL و دامنه با Nginx Proxy Manager

### 1. ورود اولیه:
- URL: `http://YOUR_IP:81`  
- Email پیش‌فرض: `admin@example.com`  
- Password پیش‌فرض: `changeme`

### 2. افزودن دامنه:
- وارد بخش Proxy Hosts شوید.
- دامنه موردنظر را ثبت کرده و به آدرس داخلی یکی از سرویس‌ها مانند `http://code-server:8443` وصل کنید.

### 3. صدور گواهی SSL:
- از Let's Encrypt استفاده کرده و گزینه‌های "Force SSL" و "HTTP/2 Support" را فعال کنید.

---

## 🧪 دستورات مفید مدیریتی

### مشاهده وضعیت سرویس‌ها:
```bash
docker ps
```

### مشاهده لاگ یک سرویس:
```bash
docker logs -f code-server
```

### ریستارت یک سرویس:
```bash
docker restart metabase
```

### حذف همه سرویس‌ها:
```bash
docker stop $(docker ps -q)
docker rm -f $(docker ps -aq)
```

### بروزرسانی ایمیج‌ها:
```bash
docker pull linuxserver/code-server
docker pull postgres:15-alpine
docker pull metabase/metabase
# و سایر سرویس‌ها...
```

---

## 🛡️ نکات امنیتی مهم

1. بلافاصله رمزهای پیش‌فرض را تغییر دهید (مثل NPM)
2. اگر سرور روی اینترنت است، پورت 5432 (PostgreSQL) را فقط برای IPهای مجاز باز کنید:
   ```bash
   ufw allow from YOUR_IP to any port 5432
   ```
3. فقط با کلید SSH وارد سرور شوید و ورود رمز را غیرفعال کنید
4. به‌صورت منظم از دایرکتوری‌های دیتای سرویس‌ها بک‌آپ بگیرید

---

## ❓ سوالات متداول (FAQ)

### 1. آیا این اسکریپت قابل اجرا چندباره است؟
بله، اما در صورت اجرای مجدد، ممکن است سرویس‌های قبلی متوقف یا حذف شوند. برای اجراهای مجدد با داده قبلی، ابتدا از دیتا بک‌آپ بگیرید.

### 2. آیا رمزها امن ذخیره می‌شوند؟
در فایل `/root/kitzone-credentials.txt` ذخیره می‌شوند با دسترسی محدود (`chmod 600`). استفاده از Vault یا رمزنگاری فایل توصیه می‌شود.

### 3. اگر پورت‌ها باز نبودند یا SSL جواب نداد؟
مطمئن شوید پورت‌های 80 و 443 در فایروال باز هستند و DNS دامنه به IP سرور اشاره دارد.

---

## ❤️ توسعه‌یافته با دقت توسط تیم KitZone

> اگر این پروژه برای شما مفید بود، لطفاً ⭐ بدهید یا Issue و Pull Request ثبت کنید!  
> برای مشارکت توسعه، فایل `CONTRIBUTING.md` را مطالعه نمایید.
